(this.webpackJsonpcourseinfo=this.webpackJsonpcourseinfo||[]).push([[0],{44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var c=n(19),r=n.n(c),s=n(3),a=n(2),o=n(9),u=n(10),i=n(5),j=n.n(i),d="https://phonebook-fso-2021.herokuapp.com/api/persons",b=n(0),f=function(e){var t=e.setMessage,n=e.persons,c=e.setPersons,r=Object(a.useState)(""),i=Object(s.a)(r,2),f=i[0],l=i[1],h=Object(a.useState)(""),O=Object(s.a)(h,2),m=O[0],p=O[1];return Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var r,s,a=n.find((function(e){return e.name===f}));if(a){var i=Object(u.a)(Object(u.a)({},a),{},{number:m});(r=a.id,s=i,j.a.put("".concat(d,"/").concat(r),s)).then((function(e){var r=n.filter((function(t){return t.id!==e.data.id}));c([].concat(Object(o.a)(r),[e.data])),t("".concat(e.data.name," was updated")),setTimeout((function(){t(null)}),3e3),l(""),p("")}))}else{(function(e){return j.a.post(d,e)})({name:f,number:m}).then((function(e){c([].concat(Object(o.a)(n),[e.data])),t("Added ".concat(e.data.name)),setTimeout((function(){t(null)}),3e3),l(""),p("")}))}},children:[Object(b.jsxs)("div",{children:["name:"," ",Object(b.jsx)("input",{required:!0,value:f,onChange:function(e){return l(e.target.value)}})]}),"number:"," ",Object(b.jsx)("input",{required:!0,value:m,onChange:function(e){return p(e.target.value)}}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){e.persons;var t=e.setSearch;return Object(b.jsxs)(b.Fragment,{children:["filter shown with: ",Object(b.jsx)("input",{onChange:function(e){return t(e.target.value)}})]})},h=function(e){var t=e.message;return null===t?null:Object(b.jsx)("div",{className:"error",children:t})},O=function(e){var t=e.person,n=e.deleteP;return Object(b.jsxs)("div",{children:[Object(b.jsxs)("span",{children:[t.name," ",t.number]}),Object(b.jsx)("button",{onClick:function(){return n(t.id,t.name)},children:"delete"})]})},m=function(e){var t=e.persons,n=e.search,c=e.setPersons,r=e.setMessage,s=function(e,n){window.confirm("Delete ".concat(n,"?"))&&function(e){return j.a.delete("".concat(d,"/").concat(e))}(e).then((function(){var s=t.filter((function(t){return t.id!==e}));c(s),r("Deleted ".concat(n)),setTimeout((function(){r(null)}),3e3)})).catch((function(){r("Information of ".concat(n," has already been deleted from server")),setTimeout((function(){r(null)}),3e3)}))};return t.filter((function(e){return e.name.toLowerCase().startsWith(n.toLowerCase())})).map((function(e,t){return Object(b.jsx)(O,{person:e,deleteP:s},t)}))},p=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),o=Object(s.a)(r,2),u=o[0],i=o[1],O=Object(a.useState)(""),p=Object(s.a)(O,2),v=p[0],x=p[1];return Object(a.useEffect)((function(){j.a.get(d).then((function(e){return i(e.data)}))}),[]),Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(l,{persons:u,setSearch:c}),v&&Object(b.jsx)(h,{message:v}),Object(b.jsx)("h2",{children:"add a new"}),Object(b.jsx)(f,{setMessage:x,persons:u,setPersons:i}),Object(b.jsx)("h2",{children:"Numbers"}),Object(b.jsx)(m,{setMessage:x,persons:u,search:n,setPersons:i})]})};n(44);r.a.render(Object(b.jsx)(p,{}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.f072a40a.chunk.js.map